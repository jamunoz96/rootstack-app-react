(this["webpackJsonprootstack-app"]=this["webpackJsonprootstack-app"]||[]).push([[0],{413:function(e,t,a){},426:function(e,t,a){},428:function(e,t,a){"use strict";a.r(t);var n=a(47),r=a.n(n),c=a(0),s=a.n(c),o=a(6),i=a(56),l=a(38),u=a(183),d=a(2),j="auth/LOADING",b="auth/LOGIN",m="auth/LOGOUT",p="auth/GET_USER",h="auth/REQUEST_ERROR",g=localStorage.getItem("auth_token")||null,O={user:function(){var e=localStorage.getItem("auth_user");return e?JSON.parse(e):null}(),token:g,isAuthed:!!g,errorMessage:null,isLoading:!1},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(d.a)(Object(d.a)({},e),{},{isLoading:!0});case b:return localStorage.setItem("auth_token",t.payload.token),Object(d.a)(Object(d.a)({},e),{},{isAuthed:!0,token:t.payload.token,user:null,errorMessage:null,isLoading:!1});case p:return localStorage.setItem("auth_user",JSON.stringify(t.payload.user)),Object(d.a)(Object(d.a)({},e),{},{user:t.payload.user,isLoading:!1});case m:return localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),Object(d.a)(Object(d.a)({},e),{},{isAuthed:!1,token:null,user:null,errorMessage:null,isLoading:!1});case h:return Object(d.a)(Object(d.a)({},e),{},{errorMessage:t.payload.error,isLoading:!1});default:return e}},x="auth/GET_JOBS",v="auth/REQUEST_ERROR",y={current_page:function(){var e=localStorage.getItem("current_page_jobs");return e?parseInt(e):1}(),data:[],last_page:0,total:0},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return localStorage.setItem("current_page_jobs",JSON.stringify(t.payload.current_page)),Object(d.a)(Object(d.a)({},e),{},{current_page:t.payload.current_page,data:t.payload.data,last_page:t.payload.last_page,total:t.payload.total});case v:return Object(d.a)(Object(d.a)({},e),{},{errorMessage:t.payload.error});default:return e}},_="map/CENTER_MAP",k={zoom:2,center:{lat:0,lng:0}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;return t.type===_?Object(d.a)(Object(d.a)({},e),{},{zoom:t.payload.zoom,center:t.payload.center}):e},w=Object(l.combineReducers)({auth:f,job:N,map:S}),I=a(184),E=Object(l.createStore)(w,Object(l.compose)(Object(I.composeWithDevTools)(Object(l.applyMiddleware)(u.a)))),L=a(4),z=a(185),A={api_url:"https://coding-test.rootstack.net/api"};var R=a.n(z).a.create({baseURL:A.api_url,headers:{Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))}}),B=function(){return{type:j}},M=function(e){return{type:h,payload:{error:e}}},J=function(e,t){return function(a){var n;a(B()),(n={email:e,password:t},R.post("/auth/login",n)).then((function(e){return a((t=e.data.access_token,{type:b,payload:{token:t}}));var t})).catch((function(e){return a(M(e))}))}},T=function(){return function(e,t){t().auth.user||(e(B()),function(){var e=localStorage.getItem("auth_token");return R.get("/auth/me",{headers:{Authorization:"Bearer ".concat(e)}})}().then((function(t){return e(function(e){return{type:p,payload:{user:e}}}(t.data))})).catch((function(t){return e(M(t))})))}},C=function(){return function(e){e({type:m})}},F=E.dispatch,G=function(e){return F(e)},U=a(1),q=function(){var e=Object(o.b)((function(e){return e.auth})).user;return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)("nav",{className:"navbar navbar-light bg-light",children:Object(U.jsxs)("div",{className:"container-fluid",children:[Object(U.jsx)("img",{width:"150",alt:"",src:"https://pbs.twimg.com/media/DdL7vaFWkAAmSRy?format=png&name=large"}),Object(U.jsxs)("div",{className:"d-flex",children:[Object(U.jsx)("h4",{className:"pt-2",children:e.name}),Object(U.jsx)("button",{type:"button",onClick:function(){return G(C())},className:"btn btn-danger ms-5",children:"Close"})]})]})})})},D=function(e,t,a,n){return{type:x,payload:{current_page:e,data:t,last_page:a,total:n}}},Q=function(e){return{type:v,payload:{error:e}}},W=function(){return function(e){(function(){var e=localStorage.getItem("auth_token");return R.get("/jobs?page=1",{headers:{Authorization:"Bearer ".concat(e)}})})().then((function(t){var a=t.data,n=a.current_page,r=a.data,c=a.last_page,s=a.total;e(D(n,r,c,s))})).catch((function(t){return e(Q(t))}))}},P=function(){return function(e,t){(function(e){var t=localStorage.getItem("auth_token");return R.get("/jobs?page=".concat(e+1),{headers:{Authorization:"Bearer ".concat(t)}})})(t().job.current_page).then((function(t){var a=t.data,n=a.current_page,r=a.data,c=a.last_page,s=a.total;e(D(n,r,c,s))})).catch((function(t){return e(Q(t))}))}},V=function(){return function(e,t){(function(e){var t=localStorage.getItem("auth_token");return R.get("/jobs?page=".concat(e-1),{headers:{Authorization:"Bearer ".concat(t)}})})(t().job.current_page).then((function(t){var a=t.data,n=a.current_page,r=a.data,c=a.last_page,s=a.total;e(D(n,r,c,s))})).catch((function(t){return e(Q(t))}))}},H=function(){return function(e,t){(function(e){var t=localStorage.getItem("auth_token");return R.get("/jobs?page=".concat(e),{headers:{Authorization:"Bearer ".concat(t)}})})(t().job.current_page).then((function(t){var a=t.data,n=a.current_page,r=a.data,c=a.last_page,s=a.total;e(D(n,r,c,s))})).catch((function(t){return e(Q(t))}))}},K=function(e,t){return function(a){a(function(e,t){return{type:_,payload:{zoom:e,center:t}}}(e,t))}},X=function(){var e=Object(o.b)((function(e){return e.job})).data;return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)("div",{className:"c-container-jobs",children:Object(U.jsxs)("div",{className:"row",children:[e.map((function(e,t){return Object(U.jsx)("div",{className:"col-md-6",id:"job-card-".concat(e.id),children:Object(U.jsxs)("div",{className:"card c-card",children:[Object(U.jsx)("img",{src:e.image,height:"200",className:"card-img-top",alt:"..."}),Object(U.jsxs)("div",{className:"card-body",children:[Object(U.jsx)("h5",{className:"card-title",children:e.title}),Object(U.jsxs)("span",{children:["Status: ",Object(U.jsx)("span",{className:"badge bg-info text-dark",children:e.status})]})," ",Object(U.jsx)("br",{}),Object(U.jsxs)("span",{children:["Date: ",Object(U.jsx)("span",{className:"badge bg-warning text-dark",children:e.date})]})," ",Object(U.jsx)("br",{}),Object(U.jsxs)("span",{children:["Assigned to: ",Object(U.jsx)("span",{className:"badge bg-dark",children:e.assigned_to})]})," ",Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsx)("p",{className:"card-text",children:e.description}),Object(U.jsx)("button",{onClick:function(){return function(e){return G(K(12,{lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)}))}(e)},type:"button",className:"btn btn-outline-warning",children:"Show in map"})]})]})},e.id)})),e.length?"":Object(U.jsx)("div",{children:"0 Jobs"})]})})})},Y=function(){var e=Object(o.b)((function(e){return e.job})).total;return Object(U.jsx)("h5",{className:"pt-3",children:Object(U.jsxs)("span",{className:"alert alert-info",children:["# Jobs : ",e||0]})})},Z=a(26),$=a(58),ee=Object($.withScriptjs)(Object($.withGoogleMap)((function(){var e=Object(c.useState)(0),t=Object(Z.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(2),s=Object(Z.a)(r,2),i=s[0],l=s[1],u=Object(c.useState)({lat:0,lng:0}),d=Object(Z.a)(u,2),j=d[0],b=d[1],m=Object(o.b)((function(e){return e})),p=m.job.data,h=m.map;Object(c.useEffect)((function(){l(h.zoom),b(h.center)}),[h]);return Object(U.jsx)($.GoogleMap,{zoom:i,onCenterChanged:function(){return function(){var e=document.getElementById("job-card-".concat(a));e&&(e.classList.remove("card-border"),l(2))}()},center:j,children:p.map((function(e){return Object(U.jsx)($.Marker,{position:{lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)},onClick:function(){return function(e){var t=document.getElementById("job-card-".concat(e.id));t&&(n(e.id),t.classList.add("card-border"),t.scrollIntoView())}(e)}},e.id)}))})}))),te=(a(413),function(){var e=Object(o.b)((function(e){return e.job})),t=e.current_page,a=e.last_page;Object(c.useEffect)((function(){1===t?G(W()):t>1&&G(H())}),[]);return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)("div",{className:"mt-4 mb-4",children:Object(U.jsxs)("div",{className:"row",children:[Object(U.jsxs)("div",{className:"col-md-7",children:[Object(U.jsxs)("div",{className:"row mb-3",children:[Object(U.jsx)("div",{className:"col-md-9",children:Object(U.jsx)("h1",{children:Object(U.jsx)("b",{children:"Job List"})})}),Object(U.jsx)("div",{className:"col-md-3",children:Object(U.jsx)(Y,{})})]}),Object(U.jsx)(X,{}),Object(U.jsxs)("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end mt-3",children:[1===t?"":Object(U.jsx)("button",{onClick:function(){return G(V())},className:"btn btn-dark me-md-2",type:"button",children:"Back"}),a===t?"":Object(U.jsx)("button",{onClick:function(){return G(P())},className:"btn btn-dark",type:"button",children:"Next"})]})]}),Object(U.jsx)("div",{className:"col-md-5",children:Object(U.jsx)(ee,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyB2NvJQg_BTuL3ziQ1733izl0NjyjRJyWE&v=3.exp&libraries=geometry,drawing,places",loadingElement:Object(U.jsx)("div",{style:{height:"100%"}}),containerElement:Object(U.jsx)("div",{style:{height:"700px"}}),mapElement:Object(U.jsx)("div",{style:{height:"100%"}})})})]})})})}),ae=function(){return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(q,{}),Object(U.jsx)(te,{})]})},ne=s.a.memo(ae),re=a(83),ce=["component"],se=function(e){var t=e.component,a=Object(re.a)(e,ce),n=Object(o.b)((function(e){return e.auth})),r=n.token,c=n.user;return Object(U.jsx)(L.b,Object(d.a)(Object(d.a)({},a),{},{render:function(e){return r&&c?Object(U.jsx)(t,Object(d.a)({},e)):Object(U.jsx)(L.a,{to:"/login"})}}))},oe=["component"],ie=function(e){var t=e.component,a=Object(re.a)(e,oe),n=Object(o.b)((function(e){return e.auth})),r=n.token,c=n.user;return Object(U.jsx)(L.b,Object(d.a)(Object(d.a)({},a),{},{render:function(e){return r&&c?Object(U.jsx)(L.a,{to:"/"}):Object(U.jsx)(t,Object(d.a)({},e))}}))},le=a(39),ue=a(88),de=function(){var e=Object(o.b)((function(e){return e.auth})),t=e.token,a=e.isLoading,n=e.errorMessage;Object(c.useEffect)((function(){t&&G(T())}),[t]);return Object(U.jsx)("div",{className:"col-md-12",children:Object(U.jsxs)("div",{className:"card card-container",children:[Object(U.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(U.jsx)(le.d,{initialValues:{username:"tvandervort@example.net",password:"password"},validationSchema:function(){return ue.a().shape({username:ue.b().required("This field is required!"),password:ue.b().required("This field is required!")})},onSubmit:function(e){var t=e.username,a=e.password;G(J(t,a))},children:Object(U.jsxs)(le.c,{children:[Object(U.jsxs)("div",{className:"form-group",children:[Object(U.jsx)("label",{children:"Username"}),Object(U.jsx)(le.b,{name:"username",type:"text",className:"form-control"}),Object(U.jsx)(le.a,{name:"username",component:"div",className:"badge bg-warning text-dark"})]}),Object(U.jsxs)("div",{className:"form-group",children:[Object(U.jsx)("label",{children:"Password"}),Object(U.jsx)(le.b,{name:"password",type:"password",className:"form-control"}),Object(U.jsx)(le.a,{name:"password",component:"div",className:"badge bg-warning text-dark"})]}),Object(U.jsx)("div",{className:"d-grid gap-2 mt-3",children:Object(U.jsxs)("button",{type:"submit",className:"btn btn-primary",disabled:a,children:[a&&Object(U.jsx)("span",{className:"me-2 spinner-border spinner-border-sm"}),Object(U.jsx)("span",{children:"Login"})]})}),n&&Object(U.jsx)("div",{className:"form-group",children:Object(U.jsx)("div",{className:"alert alert-danger",role:"alert",children:n})})]})})]})})},je=function(){return Object(U.jsx)("div",{className:"container mt-3",children:Object(U.jsxs)(L.d,{children:[Object(U.jsx)(se,{exact:!0,path:"/",component:ne}),Object(U.jsx)(ie,{path:"/login",component:de}),Object(U.jsx)(L.b,{children:Object(U.jsx)(L.a,{to:"/login"})})]})})},be=function(){return Object(U.jsx)(o.a,{store:E,children:Object(U.jsx)(i.a,{children:Object(U.jsx)(je,{})})})};a(426),a(427);r.a.render(Object(U.jsx)(be,{}),document.getElementById("root"))}},[[428,1,2]]]);
//# sourceMappingURL=main.5a0cf1ec.chunk.js.map